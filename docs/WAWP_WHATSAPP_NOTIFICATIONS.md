# ุฑุจุท ุฅุดุนุงุฑุงุช ูุงุชุณุงุจ ุนุจุฑ Wawp API

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฑุจุท ูุดุฑูุน ุงูุนูุงุฏุฉ ูุน **Wawp WhatsApp API** ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุชููุงุฆูุงู ุนูุฏ:
- **ุญุฌุฒ ุฌุฏูุฏ** โ ุนูุฏ ุฅูุดุงุก ููุนุฏ
- **ุชุนุฏูู ุงูุญุฌุฒ** โ ุนูุฏ ุชุญุฏูุซ ููุนุฏ
- **ุฅูุบุงุก ุงูุญุฌุฒ** โ ุนูุฏ ุชุบููุฑ ุญุงูุฉ ุงูููุนุฏ ุฅูู "ููุบู"
- **ูุงุชูุฑุฉ ุฌุฏูุฏุฉ** โ ุนูุฏ ุฅุตุฏุงุฑ ูุงุชูุฑุฉ
- **ูุตูุฉ ุฌุฏูุฏุฉ** โ ุนูุฏ ุตุฑู ูุตูุฉ

ุงููุงูุจ (ูุต ุงูุฑุณุงูุฉ) **ุฏููุงูููู**: ูุชู ุชุนุจุฆุฉ ุงููุชุบูุฑุงุช ูุซู `{{patient_name}}` ู `{{appointment_date}}` ูู ุจูุงูุงุช ุงููุธุงู.

---

## 1. ุฅุนุฏุงุฏ Wawp

1. ุฃูุดุฆ ุญุณุงุจุงู ุนูู [Wawp](https://wawp.net/signup).
2. ุฃูุดุฆ **Instance** ูุฑุจุท ูุงุชุณุงุจ (ูุณุญ QR ุฃู Request code).
3. ูู ููุญุฉ Wawp ุงูุณุฎ:
   - **Instance ID**
   - **Access Token**

---

## 2. ุฅุนุฏุงุฏ ุงููุดุฑูุน

### ุฎูุงุฑ ุฃ: ูู ูุงุฌูุฉ ุงูุฅุนุฏุงุฏุงุช (ููุถู)

1. ูู ุงููุงุฌูุฉ: **ุงูุฅุนุฏุงุฏุงุช** โ **ุงูุฅุดุนุงุฑุงุช**.
2. ูู ูุณู **ุฑุจุท ูุงุชุณุงุจ (Wawp API)** ุฃุฏุฎู:
   - **Instance ID**
   - **Access Token**
3. ุฃุถู ุงูุชุฑูุฌุฑุฒ ุงููุทููุจุฉ (ุญุฌุฒ ุฌุฏูุฏุ ูุงุชูุฑุฉ ุฌุฏูุฏุฉุ ุฅูุฎ) ูุนุฏูู ุงูููุงูุจ ุฅู ุฑุบุจุช.
4. ุงุถุบุท **ุญูุธ ุงูุชุบููุฑุงุช**.

ูุชู ุญูุธ ุจูุงูุงุช Wawp ูุน ุฅุนุฏุงุฏุงุช ุงูุนูุงุฏุฉ (ุขููุฉ ุนูู ุงูุณูุฑูุฑ).

### ุฎูุงุฑ ุจ: ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ูููู ุงุณุชุฎุฏุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูุจุฏูู ุฃู ูููู ุงูุชุฑุงุถูุฉ:

```env
WAWP_INSTANCE_ID=123456789
WAWP_ACCESS_TOKEN=your_access_token_here
```

ุฅุฐุง ุชู ุชุนุจุฆุฉ Wawp ูู ุงูุฅุนุฏุงุฏุงุช ูู ุงููุงุฌูุฉุ ุชูุณุชุฎุฏู ููู ุงูุฅุนุฏุงุฏุงุช. ูุฅูุง ุชูุณุชุฎุฏู ููู ุงูุจูุฆุฉ.

---

## 3. ุงูููุงูุจ ุงูุฏููุงููููุฉ

ูู ุชุฑูุฌุฑ ูู ูุงูุจ ูุงุชุณุงุจ (ุนุฑุจู/ุฅูุฌููุฒู). ุงููุชุบูุฑุงุช ุงููุชุงุญุฉ ุชูุณุชุจุฏู ุชููุงุฆูุงู:

| ุงูุชุงุฌ | ุงููุตู |
|------|-------|
| `{{patient_name}}` | ุงุณู ุงููุฑูุถ |
| `{{patient_phone}}` | ุฑูู ุงููุฑูุถ |
| `{{appointment_date}}` | ุชุงุฑูุฎ ุงูููุนุฏ |
| `{{appointment_time}}` | ููุช ุงูููุนุฏ |
| `{{doctor_name}}` | ุงุณู ุงูุทุจูุจ |
| `{{clinic_name}}` | ุงุณู ุงูุนูุงุฏุฉ |
| `{{invoice_amount}}` | ูููุฉ ุงููุงุชูุฑุฉ |
| `{{invoice_id}}` | ุฑูู ุงููุงุชูุฑุฉ |
| `{{payment_amount}}` | ูููุฉ ุงูุฏูุนุฉ |
| `{{service_name}}` | ุงุณู ุงูุฎุฏูุฉ |

**ูุซุงู ูุงูุจ ุญุฌุฒ ุฌุฏูุฏ (ูุงุชุณุงุจ):**
```
ูุฑุญุจุงู {{patient_name}} ๐
ููุนุฏู ุนูุฏูุง ุจุชุงุฑูุฎ {{appointment_date}} ุงูุณุงุนุฉ {{appointment_time}}
ุงูุนูุงุฏุฉ: {{clinic_name}}
```

ูููู ุชุนุฏูู ูุฐุง ุงููุต ูู **ุงูุฅุนุฏุงุฏุงุช โ ุงูุฅุดุนุงุฑุงุช** ููู ุชุฑูุฌุฑ ูููุงุฉ (ูุงุชุณุงุจ / SMS / ุฅูููู).

---

## 4. ุณููู ุงูุฅุฑุณุงู

- ุงูุฅุดุนุงุฑ ููุฑุณู **ุจุนุฏ** ูุฌุงุญ ุงูุนูููุฉ (ุฅูุดุงุก ููุนุฏุ ูุงุชูุฑุฉุ ูุตูุฉุ ุฅูุฎ).
- ุงูุฅุฑุณุงู **ุบูุฑ ูุชุฒุงูู** (ูุง ูุจุทุฆ ุงุณุชุฌุงุจุฉ ุงูู API).
- ุฅุฐุง ูุงู ุงูุชุฑูุฌุฑ **ูุนุทููุงู** ุฃู ููุงุฉ ูุงุชุณุงุจ ุบูุฑ ููุนููุฉุ ูุง ููุฑุณู ุดูุก.
- ุฑูู ุงููุฑูุถ ููุณุชุฎุฏู ูู `chatId` ูู Wawp (ุจุตูุบุฉ ุฏูููุฉ ูุน `@c.us`).

---

## 5. ุงููููุงุช ุงููุถุงูุฉ/ุงููุนุฏููุฉ

| ุงูููู | ุงููุธููุฉ |
|-------|---------|
| `src/models/Settings.ts` | ุฅุถุงูุฉ `notifications.triggers` ู `notifications.wawp` |
| `src/utils/notificationService.ts` | ุฎุฏูุฉ ุงูุฅุดุนุงุฑุงุช + ุงุณุชุฏุนุงุก Wawp + ุชุนุจุฆุฉ ุงููุงูุจ |
| `src/controllers/appointmentController.ts` | ุฅุฑุณุงู ุฅุดุนุงุฑ ุญุฌุฒ ุฌุฏูุฏ / ุชุนุฏูู / ุฅูุบุงุก |
| `src/controllers/invoiceController.ts` | ุฅุฑุณุงู ุฅุดุนุงุฑ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ |
| `src/controllers/prescriptionController.ts` | ุฅุฑุณุงู ุฅุดุนุงุฑ ูุตูุฉ ุฌุฏูุฏุฉ |
| `clinc_frontend/.../NotificationsTab.tsx` | ูุงุฌูุฉ ุฅุนุฏุงุฏ ุงูุชุฑูุฌุฑุฒ + ุญููู Wawp (Instance ID, Access Token) |

---

## 6. ูุฑุงุฌุน Wawp

- [ุฅุฑุณุงู ุฑุณุงูุฉ ูุตูุฉ (Send Text)](https://docs.wawp.net/send-text-19593690e0)
- [Send Messages โ ุงููุซุงุฆู ุงูุนุงูุฉ](https://docs.wawp.net/send-messages-1300465m0)

Endpoint ุงููุณุชุฎุฏู: `POST https://wawp.net/wp-json/awp/v1/send` ูุน `instance_id`, `access_token`, `chatId`, `message`.
